{% extends "base.html" %}

{% block title %}{% if supplier %}ç¼–è¾‘{% else %}æ·»åŠ {% endif %}ä¾›åº”å•† - åŒ»è¯ç®¡ç†ç³»ç»Ÿ{% endblock %}
{% block page_title %}{% if supplier %}ç¼–è¾‘{% else %}æ·»åŠ {% endif %}ä¾›åº”å•†{% endblock %}

{% block content %}
<div class="page-header">
    <h2>{% if supplier %}ç¼–è¾‘{% else %}æ·»åŠ {% endif %}ä¾›åº”å•†</h2>
    {% if not supplier %}
    <button type="button" onclick="quickFill('supplier')" class="btn btn-success">
        ğŸ² å¿«é€Ÿå¡«å……æµ‹è¯•æ•°æ®
    </button>
    {% endif %}
</div>

<div class="table-card">
    <form method="post" onsubmit="return validateSupplierForm()">
        <div class="form-group">
            <label for="name">ä¾›åº”å•†åç§° *</label>
            <input type="text" id="name" name="name" class="form-control" 
                   value="{{ supplier.name if supplier else '' }}" 
                   placeholder="ä¾‹å¦‚ï¼šåä¸œåŒ»è¯æœ‰é™å…¬å¸" required>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="contact">è”ç³»äºº</label>
                <input type="text" id="contact" name="contact" class="form-control" 
                       value="{{ supplier.contact if supplier else '' }}"
                       placeholder="ä¾‹å¦‚ï¼šç‹äº”">
            </div>
            
            <div class="form-group">
                <label for="phone">ç”µè¯</label>
                <input type="tel" id="phone" name="phone" class="form-control" 
                       value="{{ supplier.phone if supplier else '' }}"
                       placeholder="ä¾‹å¦‚ï¼š13911112222">
            </div>
        </div>
        
        <div class="form-group">
            <label for="address">åœ°å€</label>
            <input type="text" id="address" name="address" class="form-control" 
                   value="{{ supplier.address if supplier else '' }}"
                   placeholder="ä¾‹å¦‚ï¼šä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºä¸–çºªå¤§é“1å·">
        </div>
        
        <div class="form-group">
            <label for="qualification_no">èµ„è´¨ç¼–å·</label>
            <input type="text" id="qualification_no" name="qualification_no" class="form-control" 
                   value="{{ supplier.qualification_no if supplier else '' }}"
                   placeholder="ä¾‹å¦‚ï¼šGSP-2021-0001">
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">ä¿å­˜</button>
            <a href="{{ url_for('basic.supplier_list') }}" class="btn btn-secondary">å–æ¶ˆ</a>
        </div>
    </form>
</div>

<script>
function validateSupplierForm() {
    const name = document.getElementById('name').value.trim();
    const phone = document.getElementById('phone').value.trim();
    
    if (!name) {
        alert('è¯·è¾“å…¥ä¾›åº”å•†åç§°');
        return false;
    }
    
    // ç”µè¯å·ç éªŒè¯
    if (phone && !/^1[3-9]\d{9}$/.test(phone)) {
        if (!confirm('æ‰‹æœºå·æ ¼å¼å¯èƒ½ä¸æ­£ç¡®ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ')) {
            return false;
        }
    }
    
    return true;
}
</script>

<style>
.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}

@media (max-width: 768px) {
    .form-row {
        grid-template-columns: 1fr;
    }
}
</style>
{% endblock %}
