# 医药管理系统

一个功能完整的医药管理系统，采用Flask框架开发，前后端不分离，包含现代化UI设计和数据可视化功能。

## 系统功能

### 1. 数据仪表盘 📊
- 今日/本月销售统计
- 库存总览和预警
- 销售趋势图表
- 热销药品排行
- 低库存实时监控

### 2. 基础信息管理
- **药品管理** 💊：药品信息的增删改查，包括规格、价格、有效期等
- **员工管理** 👥：员工档案、部门、职位管理
- **客户管理** 🏪：客户信息、类型（零售/批发）管理
- **供应商管理** 🏭：供应商资质、联系方式管理

### 3. 库存管理
- **入库登记** 📥：采购入库、供应商关联
- **库存查询** 📦：实时库存查询、多仓库支持
- **仓库管理** 🏢：仓库信息、负责人管理
- **库存盘点** ✅：盘点记录、盘盈盘亏处理
- **退货处理** ↩️：向供应商退货登记

### 4. 销售管理
- **销售登记** 💰：开单、库存自动扣减
- **销售退货** 🔄：退货审批、库存回补
- **财务统计** 💵：日/月财务报表生成
- **销售报表** 📈：销售趋势、药品排行

### 5. 数据分析
- 近7天销售趋势
- 药品销售排行榜
- 库存状态分析
- 财务利润分析

## 技术栈

- **后端**: Python 3.x + Flask
- **数据库**: SQLite (可切换到MySQL/PostgreSQL)
- **ORM**: SQLAlchemy
- **前端**: Jinja2 模板 + 原生 HTML/CSS/JavaScript
- **图表**: Chart.js

## 安装部署

### 1. 环境要求
```bash
Python 3.7+
Flask 3.x
Flask-SQLAlchemy 3.x
```

### 2. 安装依赖
```bash
# 如果使用conda环境（推荐）
conda activate myblog

# 安装依赖包
pip install flask flask-sqlalchemy
```

### 3. 初始化数据库
```bash
# 生成测试数据
python init_data.py
```

### 4. 启动服务
```bash
python app.py
```

访问: http://127.0.0.1:5000

## 项目结构

```
medicine_sql/
├── app.py                 # 主程序入口
├── models.py              # 数据库模型（17个表）
├── init_data.py           # 数据初始化脚本
├── routes/                # 路由模块（分文件）
│   ├── dashboard.py       # 仪表盘和数据分析
│   ├── basic_info.py      # 基础信息管理
│   ├── inventory_mgmt.py  # 库存管理
│   └── sales_mgmt.py      # 销售管理
├── templates/             # HTML模板
│   ├── base.html          # 基础布局
│   ├── dashboard/         # 仪表盘页面
│   ├── basic/             # 基础信息页面
│   ├── inventory/         # 库存管理页面
│   └── sales/             # 销售管理页面
├── static/                # 静态资源
│   └── css/
│       └── style.css      # 样式文件（含按钮特效）
└── medicine.db            # SQLite数据库（自动生成）
```

## 数据库设计

系统包含17个数据表：

**基础信息** (9个表)
- drug_info: 药品信息
- employee_info: 员工信息
- customer_info: 客户信息
- supplier_info: 供应商信息
- permission: 权限
- role: 角色
- role_permission: 角色权限关联
- user_role: 用户角色关联
- system_log: 系统日志

**库存管理** (5个表)
- stock_in: 入库登记
- inventory: 库存
- warehouse: 仓库
- inventory_check: 库存盘点
- return_stock: 退货处理

**销售管理** (3个表)
- sales: 销售登记
- sales_return: 销售退货
- finance_stat: 财务统计

## 功能特色

### 1. 现代化UI设计
- 渐变色背景和卡片设计
- 响应式布局，支持多屏幕
- 平滑过渡动画
- 图标化导航

### 2. 按钮特效
- 悬停渐变效果
- 波纹点击动画
- 颜色过渡动画
- 阴影提升效果

### 3. 数据可视化
- Chart.js实现的交互式图表
- 销售趋势折线图
- 热销药品柱状图
- 实时数据更新

### 4. 业务逻辑
- 入库自动更新库存
- 销售自动扣减库存
- 库存预警机制
- 盘点差异处理

## 测试数据

运行 `init_data.py` 后会生成：
- 4个员工
- 3个供应商
- 4个客户
- 2个仓库
- 15种药品
- 随机入库记录
- 100条销售记录

测试账号：
- 账号: zhangsan, 密码: 123456 (销售经理)
- 账号: lisi, 密码: 123456 (仓管员)

## 扩展建议

1. **权限管理**: 实现登录验证和角色权限控制
2. **数据导出**: 添加Excel导出功能
3. **打印功能**: 销售单据打印
4. **移动端**: 响应式优化或开发小程序
5. **高级统计**: 更多维度的数据分析
6. **库存预测**: AI预测库存需求

## 注意事项

1. 本系统使用SQLite数据库，适合中小规模应用
2. 生产环境建议切换到MySQL/PostgreSQL
3. 密码存储未加密，实际应用需使用bcrypt等加密
4. 需要配置SECRET_KEY用于session管理
5. 建议添加日志记录和异常处理

## 开发者

本系统基于医药行业实际需求设计，涵盖了药品管理的核心业务流程。

## 许可证

MIT License
